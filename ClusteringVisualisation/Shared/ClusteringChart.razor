@using System.Numerics
@using System.Globalization

<div class="points-container">
    @for (int i = 0; i < this.points.Length; i++)
    {
    <div class="point" style="@PrintPointStyle(i)"></div>
    }
</div>

@code {

    [Parameter]
    public int PointsCount { get; set; }

    private Vector2[] points;

    protected override void OnInitialized()
    {
        this.points = new Vector2[PointsCount];
        var rng = new Random(0);
        for (int i = 0; i < this.points.Length; i++)
        {
            this.points[i] = new Vector2(
                x: (float)rng.NextDouble(),
                y: (float)rng.NextDouble()
            );
        }
    }

    private string PrintPointStyle(int i)
    {
        var culture = CultureInfo.InvariantCulture;
        var point = this.points[i];
        return $"left: {(point.X * 100f).ToString(culture)}%;" +
                $"top: {(point.Y * 100f).ToString(culture)}%;" +
                $"animation-delay: {(point.LengthSquared()).ToString(culture)}s";
    }


}
